\RequirePackage{minted}
\newcommand{\ipynbsource}[2]{
    \inputminted[
        breaklines,
        frame=single,
        framesep=4mm,
        breakanywhere=false,
        fontsize=\footnotesize,
        bgcolor=white,  % keeps the boxes from splitting across pages
    ]{python}{.cells/#1/#2.source}
}
\newcommand{\ipynboutput}[2]{
    \inputminted[
        breaklines,
        frame=single,
        framesep=4mm,
        breakanywhere=false,
        fontsize=\footnotesize,
        bgcolor=white,  % keeps the boxes from splitting across pages
    ]{python}{.cells/#1/#2.output}
}
\newcommand{\ipynb}[3]{
    \begin{figure}
        \ipynbsource{#1}{#2}
            \ifx #3t
                \vspace{-1.5cm}
                \ipynboutput{#1}{#2}
            \fi
        \caption{#1 #2}
    \end{figure}
}